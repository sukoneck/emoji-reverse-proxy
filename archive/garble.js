









    // response.writeHead(200, { "Content-Type": "text/plain" });
    // response.write("you made it");



    // res.redirect()
    // res.write(redirect);
    // res.end();

    // response.writeHead(200, {'Content-Type': 'text/plain'});
    // response.write(w3_redirect);




    // let redirects_encoded = callEth(redirects_data);
    // console.log("data: " + redirects_result + "\nencoded: " + redirects_encoded)
    // let redirects_result = decodeEth("string", redirects_encoded);
    
    // console.log(sub_hex);

    // let redirects_data = abiRedirects(sub_hex);
    // console.log(redirects_data);

    // let redirects_encoded = callEth(redirects_data);
    // let string, redirects_result = 
    
    // var nyomg = web3.eth.call({
    //         to: contract_address,
    //         data: abiRedirects(sub_hex)
    //     }).then(decodeEth2).then(toString);
            // .then(result => async function(result) {
            //     return await result
            // });
        // .then(console.log)
        // .then(res.write);

    // const writeToResponse = res.write.bind(res);
    // web3.eth.call({
    //             to: contract_address,
    //             data: abiRedirects(sub_hex)
    //         }).then(decodeEth2).then(toString).then(writeToResponse);


    // res.writeHead(200, {'Content-Type': 'text/plain'});
    // sendIt(sub_hex).then(prom => res.write(prom)).then(res.end);



    // async function nyomg() {
    //     res.writeHead(200, {'Content-Type': 'text/plain'});
    //     // let whygod = await web3.eth.call({
    //     web3.eth.call({
    //         to: contract_address,
    //         data: abiRedirects(sub_hex)
    //     }).then(decodeEth2).then(toString).then(res.write);
    //     // res.write(await whygod);
    //     res.end();
    // }   
    // nyomg();


// var numbo = '93';
// sendIt(numbo)

// var hexString = "0xf09f8c88"
// var ascii1 = web3.utils.hexToAscii(hexString);
// var number = web3.utils.hexToNumber(hexString);
// var numberstr = web3.utils.hexToNumberString(hexString);
// var sha3 = web3.utils.sha3(hexString);
// var utf = web3.utils.hexToUtf8(hexString);
// var bn = web3.utils.toBN(string).toString();
// var bytes = web3.utils.hexToBytes(hexString);
// console.log(hexString + "\n" + ascii1 + "\n" + number + "\n" + numberstr + "\n" + sha3 + "\n" + utf + "\n" + bn + "\n" + bytes);

// var string = "xn--og8h"
// var string = "ðŸŒˆ"
// var hex = web3.utils.toHex(string);
// var sha3 = web3.utils.sha3(string);
// var utf = web3.utils.utf8ToHex(string); // THIS IS IT RIGHT HERE
// var ascii = web3.utils.asciiToHex(string);
// console.log(string + "\n" + hex + "\n" + sha3 + "\n" + utf + "\n" + ascii);

// async function middle(input) {
//     let result = await sendIt(input);
//     let output = toString(result);
//     return output;
// }




    // .then(toString).then(console.log).then(data => res.write(data));

    // let redirects_result = decodeEth(redirects_encoded);
    // console.log(redirects_result);
    

    // const checkIfItsDone = (hex) => {
    //     sendIt(hex)
    //         .then(ok => {
    //             return ok
    //         })
    // }


    // let redirects_encoded = callEth(redirects_data)
    // .then(data => {
    //     return data;
    // });
    
    // let redirects_result = sendIt(sub_hex).then(async result => {
    //     await result.toString();
    // });
    // console.log("out: " + redirects_result);
    
    // async function sendItToSendIt(hex) {
    //     return await sendIt(hex)
    //     .then(result => {
    //         console.log("result: " + result + "\nreqq: " + reqq);
    //         return reqq.write(result)
    //     })
    // }
    // sendItToSendIt(sub_hex, req);
    // console.log(sendItToSendIt(sub_hex));



    // .then(encode => decodeEth(encode))
    // .then(decode => console.log(decode));

    // abiRedirects(sub_hex)
    // .then(data => callEth(data))
    // .then(encode => decodeEth(encode))
    // .then(decode => console.log(decode));


    // let w3_redirect = sendIt(sub_hex)
    // // .then(data => { 
    // //     // w3_redirect = data
    // //     return w3_redirect
    // // }); 
    // .then(function(data){
    //     console.log(data);
    //     return data;
    // });
    // sendIt(sub_hex).then(data => res.write(data));
    // sendIt(sub_hex).then(data => console.log(toString(data)));
    // .then(function(data) {
    //     console.log("early: " + data);
    //     res.write(data);
    //     // return data;
    // });
    // .then(function(data){
    //     console.log(data);
    //     return data;
    // }); 
    // let redirect = toString(w3_redirect);
    // return w3_redirect
    // }
    // let redirect = toString(w3_redirect);
    // let redirect = toString(sendIt(sub_hex));
    // console.log(toString(sendIt(sub_hex)));
    // console.log("late: " + w3_redirect + " " + redirect);
    // console.log(res.body + " " + redirect);
    // console.log(Promise.resolve(w3_redirect + "\n" + redirect));
    // res.writeHead(200, {'Content-Type': 'text/plain'});
    // res.write(redirect);
    // res.write(sub_puny +"\n"+ sub_uni +"\n"+ sub_hex);
    // res.statusCode(301)


    // res.writeHead(200, {'Content-Type': 'text/plain'});
    // let whygod = nyomg.toString();
    // res.write(whygod);
    // // res.write("redirects_result");
    // res.end();






// Include punycode module
// const punycode = require('punycode');

// Decode Punycode strings of ASCII
// to Unicode symbols
// console.log(punycode.decode('manama-pta'));
// console.log(punycode.decode('xn--og8h'));


    
    // let heads = req.headers.host.split(".")[0]
    // let codes = web3.utils.utf8ToHex(heads)
    // let encoded = web3.utils.utf8ToHex(req.headers)
    // let numbo = req.url + "\n" + req.headers.host  + "\n" + subdomain  + "\n" + encoded + "\n" + codes + "\n" + heads
    // punycode.toUnicode('xn--og8h')
    // console.log(numbo)













// const statusCode = 301

// async function handleRequest(request) {
//   const url = new URL(request.url)
//   const encoded = encodeURI(url)
//   const subdomain = encoded.hostname.split(".")[0]
  
//   const destinationURL = base + subdomain
  
//   return Response.redirect(destinationURL, statusCode)
// }

// addEventListener("fetch", async event => {
//   event.respondWith(handleRequest(event.request))
// })
